<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="description" content="EcoSentinel AI - Community-Driven Environmental Risk Intelligence Platform" />
    <meta name="keywords" content="environmental intelligence, climate action, Kenya, UNEP, AI, flooding, air quality, deforestation" />
    <meta name="author" content="Gideon Kiprono" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="alternate icon" type="image/png" href="/favicon.png" />
    <title>EcoSentinel AI - Environmental Risk Intelligence Platform</title>
    
    <!-- Google Fonts for better typography -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Azure Maps SDK -->
    <link rel="stylesheet" href="https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.min.css" type="text/css" />
    <script src="https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.min.js"></script>
    
    <style>
      :root {
        /* EcoSentinel AI Brand Colors - From Brand Guidelines */
        --forest-green: #2E7D32;
        --eco-green: #4CAF50;
        --nature-green: #388E3C;
        --tech-blue: #00BCD4;
        --alert-orange: #FF9800;
        --deep-blue: #1976D2;
        --earth-red: #F44336;
        --dark-forest: #1B5E20;
        --light-green: #E8F5E8;
        --sage: #C8E6C9;
        --gray: #757575;
        
        /* Layout */
        --sidebar-width: 280px;
        --header-height: 70px;
        --border-radius: 12px;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        
        /* Animation */
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', Arial, sans-serif;
        background: #f8fafc;
        color: var(--dark-forest);
        overflow-x: hidden;
      }

      /* Header */
      .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: var(--header-height);
        background: linear-gradient(135deg, var(--forest-green) 0%, var(--nature-green) 100%);
        box-shadow: var(--shadow);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 2rem;
        color: white;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .logo {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
      }

      .header-title {
        font-family: 'Space Grotesk', sans-serif;
        font-size: 1.5rem;
        font-weight: 700;
      }

      .header-right {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .language-toggle {
        display: flex;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 20px;
        padding: 4px;
        gap: 4px;
      }

      .lang-btn {
        padding: 6px 12px;
        border: none;
        background: transparent;
        color: white;
        border-radius: 16px;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
      }

      .lang-btn.active {
        background: rgba(255, 255, 255, 0.3);
        backdrop-filter: blur(10px);
      }

      .voice-assistant-btn {
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.15);
        border: none;
        border-radius: 50%;
        color: white;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
      }

      .voice-assistant-btn:hover {
        background: rgba(255, 255, 255, 0.25);
        transform: scale(1.05);
      }

      /* Sidebar Navigation */
      .sidebar {
        position: fixed;
        top: var(--header-height);
        left: 0;
        width: var(--sidebar-width);
        height: calc(100vh - var(--header-height));
        background: white;
        box-shadow: var(--shadow);
        z-index: 900;
        overflow-y: auto;
      }

      .nav-menu {
        padding: 1.5rem 0;
      }

      .nav-item {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem 1.5rem;
        color: var(--gray);
        text-decoration: none;
        transition: var(--transition);
        border-left: 3px solid transparent;
      }

      .nav-item:hover {
        background: var(--light-green);
        color: var(--forest-green);
      }

      .nav-item.active {
        background: var(--light-green);
        color: var(--forest-green);
        border-left-color: var(--forest-green);
        font-weight: 600;
      }

      .nav-icon {
        font-size: 1.25rem;
        width: 24px;
        text-align: center;
      }

      /* Main Content */
      .main-content {
        margin-left: var(--sidebar-width);
        margin-top: var(--header-height);
        padding: 2rem;
        min-height: calc(100vh - var(--header-height));
      }

      /* Dashboard Grid */
      .dashboard-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        grid-template-rows: auto auto auto;
        gap: 2rem;
        height: calc(100vh - var(--header-height) - 4rem);
      }

      /* Map Section */
      .map-section {
        grid-column: 1;
        grid-row: 1 / 3;
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        overflow: hidden;
        position: relative;
      }

      .map-header {
        padding: 1.5rem;
        border-bottom: 1px solid #e5e7eb;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .map-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--dark-forest);
      }

      .map-container {
        height: 500px;
        background: linear-gradient(135deg, var(--light-green) 0%, var(--sage) 100%);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .map-placeholder {
        text-align: center;
        color: var(--gray);
      }

      /* Cards */
      .info-card {
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        padding: 1.5rem;
        transition: var(--transition);
      }

      .info-card:hover {
        box-shadow: var(--shadow-lg);
        transform: translateY(-2px);
      }

      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 1rem;
      }

      .card-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--dark-forest);
      }

      .card-icon {
        font-size: 1.5rem;
      }

      /* Air Quality Card */
      .air-quality-card {
        grid-column: 2;
        grid-row: 1;
      }

      .aqi-value {
        font-size: 3rem;
        font-weight: 700;
        margin: 1rem 0;
      }

      .aqi-good { color: var(--eco-green); }
      .aqi-moderate { color: var(--alert-orange); }
      .aqi-unhealthy { color: var(--earth-red); }

      .aqi-status {
        font-size: 1.125rem;
        font-weight: 500;
        margin-bottom: 0.5rem;
      }

      .aqi-description {
        color: var(--gray);
        font-size: 0.875rem;
        line-height: 1.5;
      }

      /* Flood Risk Card */
      .flood-risk-card {
        grid-column: 2;
        grid-row: 2;
      }

      .risk-level {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin: 1rem 0;
      }

      .risk-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
      }

      .risk-low { background: var(--eco-green); }
      .risk-medium { background: var(--alert-orange); }
      .risk-high { background: var(--earth-red); }

      .risk-text {
        font-size: 1.25rem;
        font-weight: 600;
      }

      .model-info {
        background: var(--light-green);
        padding: 1rem;
        border-radius: 8px;
        margin-top: 1rem;
      }

      .model-label {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: var(--forest-green);
        font-weight: 600;
        margin-bottom: 0.25rem;
      }

      .model-name {
        font-size: 0.875rem;
        color: var(--dark-forest);
      }

      /* Bottom Stats */
      .stats-section {
        grid-column: 1 / 3;
        grid-row: 3;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }

      .stat-card {
        background: white;
        border-radius: var(--border-radius);
        padding: 1.5rem;
        box-shadow: var(--shadow);
        text-align: center;
        transition: var(--transition);
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .stat-icon {
        font-size: 2rem;
        margin-bottom: 1rem;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      .stat-label {
        color: var(--gray);
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      /* Floating Chat */
      .chat-float {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        z-index: 1000;
      }

      .chat-toggle {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, var(--tech-blue) 0%, var(--deep-blue) 100%);
        border: none;
        border-radius: 50%;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: var(--shadow-lg);
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .chat-toggle:hover {
        transform: scale(1.05);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }

      .chat-window {
        position: absolute;
        bottom: 80px;
        right: 0;
        width: 350px;
        height: 500px;
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-lg);
        display: none;
        flex-direction: column;
        overflow: hidden;
      }

      .chat-window.open {
        display: flex;
      }

      .chat-header {
        background: linear-gradient(135deg, var(--tech-blue) 0%, var(--deep-blue) 100%);
        color: white;
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .chat-title {
        font-weight: 600;
      }

      .chat-close {
        background: none;
        border: none;
        color: white;
        font-size: 1.25rem;
        cursor: pointer;
      }

      .chat-messages {
        flex: 1;
        padding: 1rem;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .chat-input-area {
        padding: 1rem;
        border-top: 1px solid #e5e7eb;
        display: flex;
        gap: 0.5rem;
      }

      .chat-input {
        flex: 1;
        padding: 0.75rem;
        border: 1px solid #d1d5db;
        border-radius: 20px;
        font-size: 0.875rem;
        outline: none;
      }

      .chat-input:focus {
        border-color: var(--tech-blue);
        box-shadow: 0 0 0 3px rgba(0, 188, 212, 0.1);
      }

      .chat-send {
        width: 40px;
        height: 40px;
        background: var(--tech-blue);
        border: none;
        border-radius: 50%;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .message {
        padding: 0.75rem 1rem;
        border-radius: 18px;
        max-width: 80%;
        word-wrap: break-word;
      }

      .message.user {
        background: var(--tech-blue);
        color: white;
        align-self: flex-end;
        margin-left: auto;
      }

      .message.assistant {
        background: var(--light-green);
        color: var(--dark-forest);
        align-self: flex-start;
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .sidebar {
          transform: translateX(-100%);
          transition: var(--transition);
        }

        .sidebar.open {
          transform: translateX(0);
        }

        .main-content {
          margin-left: 0;
        }

        .dashboard-grid {
          grid-template-columns: 1fr;
          grid-template-rows: auto auto auto auto;
        }

        .map-section {
          grid-column: 1;
          grid-row: 1;
        }

        .air-quality-card {
          grid-column: 1;
          grid-row: 2;
        }

        .flood-risk-card {
          grid-column: 1;
          grid-row: 3;
        }

        .stats-section {
          grid-column: 1;
          grid-row: 4;
        }
      }

      @media (max-width: 768px) {
        .header {
          padding: 0 1rem;
        }

        .header-title {
          font-size: 1.25rem;
        }

        .main-content {
          padding: 1rem;
        }

        .chat-window {
          width: calc(100vw - 2rem);
          right: 1rem;
          left: 1rem;
        }

        .stats-section {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      /* Loading Animation */
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }

      .loading {
        animation: pulse 2s infinite;
      }

      /* Status Indicators */
      .status-indicator {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 0.5rem;
      }

      .status-online { background: var(--eco-green); }
      .status-warning { background: var(--alert-orange); }
      .status-offline { background: var(--gray); }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="logo">üåç</div>
        <h1 class="header-title">EcoSentinel AI</h1>
      </div>
      <div class="header-right">
        <div class="language-toggle">
          <button class="lang-btn active" id="lang-en">EN</button>
          <button class="lang-btn" id="lang-sw">SW</button>
        </div>
        <button class="voice-assistant-btn" id="voice-btn" title="Voice Assistant">
          üé§
        </button>
      </div>
    </header>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
      <div class="nav-menu">
        <a href="#dashboard" class="nav-item active">
          <span class="nav-icon">üìä</span>
          <span>Dashboard</span>
        </a>
        <a href="#air-quality" class="nav-item">
          <span class="nav-icon">üí®</span>
          <span>Air Quality</span>
        </a>
        <a href="#flood-risk" class="nav-item">
          <span class="nav-icon">üåä</span>
          <span>Flood Risk</span>
        </a>
        <a href="#heatwave" class="nav-item">
          <span class="nav-icon">üå°Ô∏è</span>
          <span>Heatwave</span>
        </a>
        <a href="#biodiversity" class="nav-item">
          <span class="nav-icon">üå≥</span>
          <span>Biodiversity</span>
        </a>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <div class="dashboard-grid">
        <!-- Map Section -->
        <section class="map-section">
          <div class="map-header">
            <h2 class="map-title">Environmental Monitoring Map</h2>
            <div>
              <span class="status-indicator status-online"></span>
              <span style="font-size: 0.875rem; color: var(--gray);">Live Data</span>
            </div>
          </div>
          <div class="map-container" id="mapContainer">
            <div class="map-placeholder">
              <div style="font-size: 3rem; margin-bottom: 1rem;">üó∫Ô∏è</div>
              <div>Azure Maps Loading...</div>
              <div style="font-size: 0.875rem; color: var(--gray); margin-top: 0.5rem;">
                Interactive environmental risk map will appear here
              </div>
            </div>
          </div>
        </section>

        <!-- Air Quality Card -->
        <section class="info-card air-quality-card">
          <div class="card-header">
            <h3 class="card-title">Air Quality Index</h3>
            <span class="card-icon">üí®</span>
          </div>
          <div class="aqi-value aqi-moderate" id="aqiValue">156</div>
          <div class="aqi-status aqi-moderate" id="aqiStatus">Moderate</div>
          <div class="aqi-description" id="aqiDescription">
            Air quality is acceptable for most people. Sensitive individuals may experience minor issues.
          </div>
          <div style="margin-top: 1rem; font-size: 0.875rem; color: var(--gray);">
            üìç Industrial Area, Nairobi
          </div>
        </section>

        <!-- Flood Risk Card -->
        <section class="info-card flood-risk-card">
          <div class="card-header">
            <h3 class="card-title">Flood Risk Prediction</h3>
            <span class="card-icon">üåä</span>
          </div>
          <div class="risk-level">
            <span class="risk-indicator risk-medium"></span>
            <span class="risk-text" id="riskLevel">Medium Risk</span>
          </div>
          <div style="font-size: 0.875rem; color: var(--gray); margin-bottom: 1rem;">
            Next 7 days prediction for Kibera area
          </div>
          <div class="model-info">
            <div class="model-label">LoRA Model</div>
            <div class="model-name">EcoSentinel Flood Predictor v2.1</div>
          </div>
          <div style="margin-top: 1rem; font-size: 0.875rem; color: var(--gray);">
            üìç Kibera, Nairobi ‚Ä¢ Updated 5 min ago
          </div>
        </section>

        <!-- Statistics Section -->
        <section class="stats-section">
          <div class="stat-card">
            <div class="stat-icon">üå°Ô∏è</div>
            <div class="stat-value" style="color: var(--alert-orange);">28¬∞C</div>
            <div class="stat-label">Heat Index</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üå≥</div>
            <div class="stat-value" style="color: var(--eco-green);">92%</div>
            <div class="stat-label">Forest Cover</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üíß</div>
            <div class="stat-value" style="color: var(--deep-blue);">Good</div>
            <div class="stat-label">Water Quality</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">‚ö†Ô∏è</div>
            <div class="stat-value" style="color: var(--earth-red);">3</div>
            <div class="stat-label">Active Alerts</div>
          </div>
        </section>
      </div>
    </main>

    <!-- Floating Chat -->
    <div class="chat-float">
      <button class="chat-toggle" id="chatToggle">
        üí¨
      </button>
      <div class="chat-window" id="chatWindow">
        <div class="chat-header">
          <div class="chat-title">EcoSentinel AI Assistant</div>
          <button class="chat-close" id="chatClose">√ó</button>
        </div>
        <div class="chat-messages" id="chatMessages">
          <div class="message assistant">
            üëã Hello! I'm your EcoSentinel AI assistant. Ask me about environmental risks in your area.
          </div>
        </div>
        <div class="chat-input-area">
          <input type="text" class="chat-input" id="chatInput" placeholder="Ask about environmental risks...">
          <button class="chat-send" id="chatSend">‚û§</button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="/src/index.ts"></script>
    <script>
      // Language configurations
      const languages = {
        en: {
          dashboard: 'Dashboard',
          airQuality: 'Air Quality',
          floodRisk: 'Flood Risk',
          heatwave: 'Heatwave',
          biodiversity: 'Biodiversity',
          chatPlaceholder: 'Ask about environmental risks...',
          chatTitle: 'EcoSentinel AI Assistant',
          mapTitle: 'Environmental Monitoring Map',
          liveData: 'Live Data',
          aqiTitle: 'Air Quality Index',
          floodTitle: 'Flood Risk Prediction',
          heatIndex: 'Heat Index',
          forestCover: 'Forest Cover',
          waterQuality: 'Water Quality',
          activeAlerts: 'Active Alerts'
        },
        sw: {
          dashboard: 'Dashibodi',
          airQuality: 'Ubora wa Hewa',
          floodRisk: 'Hatari ya Mafuriko',
          heatwave: 'Joto Kali',
          biodiversity: 'Mazingira',
          chatPlaceholder: 'Uliza kuhusu hatari za mazingira...',
          chatTitle: 'Msaidizi wa EcoSentinel AI',
          mapTitle: 'Ramani ya Ufuatiliaji wa Mazingira',
          liveData: 'Data za Moja kwa Moja',
          aqiTitle: 'Kiwango cha Ubora wa Hewa',
          floodTitle: 'Utabiri wa Hatari ya Mafuriko',
          heatIndex: 'Kiwango cha Joto',
          forestCover: 'Mlolongo wa Misitu',
          waterQuality: 'Ubora wa Maji',
          activeAlerts: 'Maonyo Yanayoendelea'
        }
      };

      let currentLanguage = 'en';

      // Language switching
      document.getElementById('lang-en').addEventListener('click', () => switchLanguage('en'));
      document.getElementById('lang-sw').addEventListener('click', () => switchLanguage('sw'));

      function switchLanguage(lang) {
        currentLanguage = lang;
        
        // Update active button
        document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`lang-${lang}`).classList.add('active');
        
        // Update text content
        const texts = languages[lang];
        document.querySelector('.nav-item:nth-child(1) span:last-child').textContent = texts.dashboard;
        document.querySelector('.nav-item:nth-child(2) span:last-child').textContent = texts.airQuality;
        document.querySelector('.nav-item:nth-child(3) span:last-child').textContent = texts.floodRisk;
        document.querySelector('.nav-item:nth-child(4) span:last-child').textContent = texts.heatwave;
        document.querySelector('.nav-item:nth-child(5) span:last-child').textContent = texts.biodiversity;
        
        document.getElementById('chatInput').placeholder = texts.chatPlaceholder;
        document.querySelector('.chat-title').textContent = texts.chatTitle;
        document.querySelector('.map-title').textContent = texts.mapTitle;
      }

      // Chat functionality
      const chatToggle = document.getElementById('chatToggle');
      const chatWindow = document.getElementById('chatWindow');
      const chatClose = document.getElementById('chatClose');
      const chatInput = document.getElementById('chatInput');
      const chatSend = document.getElementById('chatSend');
      const chatMessages = document.getElementById('chatMessages');

      chatToggle.addEventListener('click', () => {
        chatWindow.classList.add('open');
      });

      chatClose.addEventListener('click', () => {
        chatWindow.classList.remove('open');
      });

      function sendMessage() {
        const message = chatInput.value.trim();
        if (!message) return;

        // Add user message
        const userMsg = document.createElement('div');
        userMsg.className = 'message user';
        userMsg.textContent = message;
        chatMessages.appendChild(userMsg);

        // Clear input
        chatInput.value = '';

        // Simulate AI response
        setTimeout(() => {
          const aiMsg = document.createElement('div');
          aiMsg.className = 'message assistant';
          aiMsg.textContent = generateResponse(message);
          chatMessages.appendChild(aiMsg);
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }, 1000);

        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function generateResponse(message) {
        const responses = {
          en: [
            "Based on current data, the flood risk in your area is moderate. Consider preparing emergency supplies.",
            "Air quality is currently at 156 AQI (Moderate). Sensitive individuals should limit outdoor activities.",
            "The heat index is 28¬∞C. Stay hydrated and seek shade during peak hours.",
            "Forest cover in your region is stable at 92%. Continue supporting conservation efforts."
          ],
          sw: [
            "Kulingana na data za sasa, hatari ya mafuriko eneo lako ni wastani. Zingatia kujiandaa na vifaa vya dharura.",
            "Ubora wa hewa kwa sasa ni 156 AQI (Wastani). Watu wenye mchocheo wanapaswa kupunguza shughuli za nje.",
            "Kiwango cha joto ni 28¬∞C. Kunywa maji mengi na utafute kivuli wakati wa joto kali.",
            "Mlolongo wa misitu eneo lako ni thabiti kwa 92%. Endelea kuunga mkono juhudi za uhifadhi."
          ]
        };
        
        const langResponses = responses[currentLanguage];
        return langResponses[Math.floor(Math.random() * langResponses.length)];
      }

      chatSend.addEventListener('click', sendMessage);
      chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') sendMessage();
      });

      // Navigation
      document.querySelectorAll('.nav-item').forEach(item => {
        item.addEventListener('click', (e) => {
          e.preventDefault();
          document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
          item.classList.add('active');
        });
      });

      // Voice Assistant
      document.getElementById('voice-btn').addEventListener('click', () => {
        alert(currentLanguage === 'en' ? 'Voice assistant activated!' : 'Msaidizi wa sauti ameanzishwa!');
      });

      // Simulate real-time data updates
      function updateData() {
        // Update AQI
        const aqiValues = [45, 89, 156, 178, 201];
        const aqiStatuses = ['Good', 'Moderate', 'Unhealthy for Sensitive', 'Unhealthy', 'Very Unhealthy'];
        const aqiClasses = ['aqi-good', 'aqi-good', 'aqi-moderate', 'aqi-unhealthy', 'aqi-unhealthy'];
        
        const randomIndex = Math.floor(Math.random() * aqiValues.length);
        const aqiValue = document.getElementById('aqiValue');
        const aqiStatus = document.getElementById('aqiStatus');
        
        aqiValue.textContent = aqiValues[randomIndex];
        aqiStatus.textContent = aqiStatuses[randomIndex];
        
        // Update classes
        aqiValue.className = `aqi-value ${aqiClasses[randomIndex]}`;
        aqiStatus.className = `aqi-status ${aqiClasses[randomIndex]}`;

        // Update flood risk
        const riskLevels = ['Low Risk', 'Medium Risk', 'High Risk'];
        const riskClasses = ['risk-low', 'risk-medium', 'risk-high'];
        const riskIndex = Math.floor(Math.random() * riskLevels.length);
        
        document.getElementById('riskLevel').textContent = riskLevels[riskIndex];
        document.querySelector('.risk-indicator').className = `risk-indicator ${riskClasses[riskIndex]}`;
      }

      // Update data every 30 seconds
      setInterval(updateData, 30000);

      // Initialize Azure Maps (placeholder)
      function initializeMap() {
        // This would initialize Azure Maps when the SDK is properly configured
        console.log('Azure Maps would be initialized here with proper API key');
      }

      // Initialize on load
      document.addEventListener('DOMContentLoaded', () => {
        initializeMap();
      });
    </script>
  </body>
</html>
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      /* Environmental Dashboard Layout */
      .dashboard-layout {
        display: grid;
        grid-template-columns: 320px 1fr;
        height: calc(100vh - 220px); /* Account for header and status cards */
        gap: 0;
        flex: 1;
        min-height: 0;
      }

      .sidebar {
        background: var(--eco-surface);
        border-right: 1px solid var(--eco-border);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .main-content {
        display: flex;
        flex-direction: column;
        overflow: hidden;
        position: relative;
        background: var(--eco-surface);
      }

      /* Language Selector */
      .language-selector {
        padding: 16px;
        background: var(--eco-surface-variant);
        border-bottom: 1px solid var(--eco-border);
        display: flex;
        gap: 8px;
        flex: 0 0 auto;
      }

      .lang-btn {
        flex: 1;
        padding: 8px 12px;
        background: var(--eco-surface);
        border: 1px solid var(--eco-border);
        border-radius: var(--eco-border-radius);
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--eco-text-secondary);
        cursor: pointer;
        transition: var(--eco-transition);
      }

      .lang-btn.active {
        background: var(--eco-primary);
        color: var(--eco-text-on-primary);
        border-color: var(--eco-primary);
      }

      .lang-btn:hover:not(.active) {
        background: var(--eco-surface-variant);
        border-color: var(--eco-primary);
      }

      /* Environmental Status Cards */
      .env-status-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        padding: 20px;
        background: var(--eco-bg-tertiary);
        border-bottom: 1px solid var(--eco-border);
        flex: 0 0 auto;
      }

      /* Chat Interface Styling */
      azc-chat {
        flex: 1;
        display: flex;
        flex-direction: column;
        max-width: none;
        margin: 0;
        background: var(--eco-surface);
      }

      azc-history {
        background: var(--eco-surface);
        border-bottom: 1px solid var(--eco-border);
        flex: 1;
        min-height: 0;
        overflow: auto;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .dashboard-layout {
          grid-template-columns: 1fr;
          grid-template-rows: auto 1fr;
        }
        
        .sidebar {
          border-right: none;
          border-bottom: 1px solid var(--eco-border);
          max-height: 200px;
        }
        
        .env-status-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 12px;
          padding: 16px;
        }
        
        .nav-brand {
          font-size: 1rem;
        }
        
        .nav-indicator {
          display: none;
        }
      }

      @media (max-width: 480px) {
        .env-status-grid {
          grid-template-columns: 1fr;
        }
        
        nav {
          padding: 12px 16px;
        }
        
        .nav-brand {
          font-size: 0.9rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation Header -->
    <nav>
      <div class="nav-brand">
        <img src="/logo.svg" alt="EcoSentinel AI Logo" />
        <span>EcoSentinel AI</span>
      </div>
      <div class="nav-actions">
        <div class="nav-indicator">
          <div class="status-dot"></div>
          <span>Environmental Monitor Active</span>
        </div>
      </div>
    </nav>

    <!-- Main Dashboard -->
    <main>
      <!-- Environmental Status Overview -->
      <eco-dashboard id="envDashboard"></eco-dashboard>

      <!-- Main Chat Interface Layout -->
      <div class="dashboard-layout">
        <!-- Sidebar with Chat History -->
        <div class="sidebar">
          <div class="language-selector">
            <button id="lang-en" class="lang-btn active">English</button>
            <button id="lang-sw" class="lang-btn">Kiswahili</button>
          </div>
          <azc-history id="chatHistory"></azc-history>
        </div>

        <!-- Main Chat Interface -->
        <div class="main-content">
          <azc-chat id="chat"></azc-chat>
        </div>
      </div>
    </main>

    <script type="module" src="/src/index.ts"></script>
    <script>
      // Generate a unique ID and store it in local storage
      const userId = localStorage.getItem('userId') || crypto.randomUUID();
      localStorage.setItem('userId', userId);

      // Language configurations for EcoSentinel AI
      const languageConfigs = {
        en: {
          enablePromptSuggestions: true,
          promptSuggestions: [
            'üåä What is the flood risk in my area this week?',
            'üå± When should I plant maize based on weather patterns?',
            'üí® How is the air quality in Nairobi today?',
            'üå≥ Are there any deforestation alerts in Central Kenya?',
            '‚ö†Ô∏è What environmental risks should I prepare for?',
            'üìç Give me hyperlocal environmental predictions',
            'üè† How can my community adapt to climate change?',
            'üö® What should I do during environmental emergencies?',
            'üåæ What crops are best for this season in my area?',
            'üíß Is the water quality safe in my location?',
          ],
          strings: {
            promptSuggestionsTitle: 'Ask EcoSentinel AI about environmental risks and guidance',
            citationsTitle: 'Environmental Data Sources:',
            followUpQuestionsTitle: 'Related environmental questions:',
            chatInputPlaceholder: 'Ask about environmental risks, weather forecasts, or local guidance...',
            chatInputButtonLabel: 'Send environmental query',
            assistant: 'EcoSentinel AI',
            user: 'You',
            errorMessage: 'Environmental intelligence service is temporarily unavailable. Please try again.',
            newChatButton: 'New environmental query',
            retryButton: 'Retry environmental query',
          },
        },
        sw: {
          enablePromptSuggestions: true,
          promptSuggestions: [
            'üåä Ni hatari gani ya mafuriko katika eneo langu wiki hii?',
            'üå± Ni wakati gani bora wa kupanda mahindi kulingana na hali ya hewa?',
            'üí® Je, ubora wa hewa Nairobi ni vipi leo?',
            'üå≥ Kuna onyo la ukataji misitu katika Kenya ya Kati?',
            '‚ö†Ô∏è Ni hatari gani za mazingira ninapaswa kujiandalia?',
            'üìç Nipe utabiri wa mazingira wa eneo langu',
            'üè† Jamii yangu iwezaje kubadilika na mabadiliko ya tabianchi?',
            'üö® Nifanye nini wakati wa dharura za mazingira?',
            'üåæ Ni mazao gani bora kwa msimu huu eneo langu?',
            'üíß Je, ubora wa maji ni salama eneo langu?',
          ],
          strings: {
            promptSuggestionsTitle: 'Uliza EcoSentinel AI kuhusu hatari za mazingira na mwongozo',
            citationsTitle: 'Vyanzo vya Data ya Mazingira:',
            followUpQuestionsTitle: 'Maswali mengine yanayohusiana:',
            chatInputPlaceholder: 'Uliza kuhusu hatari za mazingira, utabiri wa hali ya hewa, au mwongozo wa eneo lako...',
            chatInputButtonLabel: 'Tuma swali la mazingira',
            assistant: 'EcoSentinel AI',
            user: 'Wewe',
            errorMessage: 'Huduma ya akili ya mazingira haipatikani kwa sasa. Tafadhali jaribu tena.',
            newChatButton: 'Mazungumzo mapya ya mazingira',
            retryButton: 'Jaribu tena swali la mazingira',
          },
        }
      };

      // Current language state
      let currentLanguage = localStorage.getItem('ecoSentinelLanguage') || 'en';

      // Language switching functionality
      function switchLanguage(lang) {
        currentLanguage = lang;
        localStorage.setItem('ecoSentinelLanguage', lang);
        
        // Update active button
        document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`lang-${lang}`).classList.add('active');
        
        // Update chat configuration
        window.chat.options = languageConfigs[lang];
        
        // Dispatch language change event for other components
        document.dispatchEvent(new CustomEvent('languageChanged', {
          detail: { language: lang }
        }));
        
        // Update navigation text
        updateNavigationLanguage(lang);
      }

      // Update navigation elements based on language
      function updateNavigationLanguage(lang) {
        const navIndicator = document.querySelector('.nav-indicator span');
        if (navIndicator) {
          navIndicator.textContent = lang === 'sw' 
            ? 'Ufuatiliaji wa Mazingira Unaendelea' 
            : 'Environmental Monitor Active';
        }
      }

      // Initialize chat components
      window.chatHistory.userId = userId;
      window.chatHistory.addEventListener('loadSession', (e) => {
        const { id, messages } = e.detail;
        window.chat.sessionId = id;
        window.chat.messages = messages;
      });

      window.chat.userId = userId;
      window.chat.options = languageConfigs[currentLanguage];
      window.chat.addEventListener('messagesUpdated', () => {
        window.chatHistory.refresh();
      });

      // Handle environmental dashboard status card clicks
      function handleStatusCardClick(event) {
        const { status } = event.detail;
        
        // Auto-populate chat with environmental query based on language
        let query;
        if (currentLanguage === 'sw') {
          query = `Niambie zaidi kuhusu ${status.title.toLowerCase()}: ${status.value} katika ${status.location}. Nifanye nini?`;
        } else {
          query = `Tell me more about ${status.title.toLowerCase()} status: ${status.value} in ${status.location}. What should I do?`;
        }
        
        window.chat.question = query;
      }

      // Set up event listeners when DOM is loaded
      document.addEventListener('DOMContentLoaded', () => {
        // Language switcher event listeners
        document.getElementById('lang-en').addEventListener('click', () => switchLanguage('en'));
        document.getElementById('lang-sw').addEventListener('click', () => switchLanguage('sw'));
        
        // Environmental dashboard event listener
        const envDashboard = document.getElementById('envDashboard');
        if (envDashboard) {
          envDashboard.addEventListener('status-card-click', handleStatusCardClick);
        }
        
        // Set initial language
        switchLanguage(currentLanguage);
      });
    </script>
  </body>
</html>
